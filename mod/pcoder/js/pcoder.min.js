function PCO_ObtenerContenidoAjax(c,d,b){var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{a=new ActiveXObject("Microsoft.XMLHTTP")}a.onreadystatechange=function(){if(a.readyState===4&&a.status===200){contenido_recibido=a.responseText;contenido_recibido=contenido_recibido.trim();if(c==1){return contenido_recibido}}};if(c==1){a.open("POST",d,true)}else{a.open("POST",d,false)}a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b);if(c==0){return contenido_recibido}}function PCOJS_MostrarMensaje(b,a){$("#PCO_Modal_MensajeTitulo").html(b);$("#PCO_Modal_MensajeCuerpo").html(a);$("#PCO_Modal_Mensaje").modal("show");$("#PCO_Modal_Mensaje").css("z-index","1500")}function PCO_MostrarMensajeCargandoSimple(a){$("#PCO_Modal_MensajeCargandoSimple").modal("show");$("#PCO_Modal_MensajeCargandoSimple").css("z-index","1500");if(a!=0){setTimeout(function(){PCOJS_OcultarMensajeCargandoSimple()},a)}}function PCO_OcultarMensajeCargandoSimple(){$("#PCO_Modal_MensajeCargandoSimple").modal("hide");$("#PCO_Modal_MensajeCargandoSimple").hide()}function PCOJS_ActualizarComboBox(b){var a="#"+b;$(a).selectpicker("refresh")}function PCOJS_LimpiarComboBox(a){document.getElementById(a).options.length=0;PCOJS_ActualizarComboBox(a)}function PCOJS_AgregarOpcionComboBox(a,e,c){var d=document.getElementById(a);var b=document.createElement("option");b.value=e;b.text=c;d.add(b)}function PCOJS_OpcionesCombo_DesdeCSV(b,d,a){var c;ArregloOpciones=d.split(a);for(c in ArregloOpciones){PCOJS_AgregarOpcionComboBox(b,ArregloOpciones[c],ArregloOpciones[c])}PCOJS_ActualizarComboBox(b)}function CambiarFuenteEditor(b){editor.setFontSize(b);try{EditorClonado.setFontSize(b)}catch(a){}}function CambiarTemaEditor(b){editor.setTheme(b);try{EditorClonado.setTheme(b)}catch(a){}}function CambiarModoEditor(c){var b=c.replace(/_/g," ");b=b.toLowerCase();editor.getSession().setMode(b);document.getElementById("modo_archivo_preferencias").value=c;document.getElementById("modo_archivo_top").value=c;try{EditorClonado.getSession().setMode(b)}catch(a){}}function CaracteresInvisiblesEditor(a){if(a==0){editor.setShowInvisibles(false)}else{editor.setShowInvisibles(true)}}function IntercambiarAutocompletadoEditor(a){if(a==0){editor.session.setOption("enableBasicAutocompletion",false);editor.session.setOption("enableSnippets",false);editor.session.setOption("enableLiveAutocompletion",false)}else{editor.session.setOption("enableBasicAutocompletion",true);editor.session.setOption("enableSnippets",true);editor.session.setOption("enableLiveAutocompletion",true)}}function IntercambiarEstadoCaracteresInvisibles(){if(editor.getShowInvisibles()==true){editor.setShowInvisibles(false);EditorClonado.setShowInvisibles(false)}else{editor.setShowInvisibles(true);EditorClonado.setShowInvisibles(true)}}function VerificarSintaxisEditor(){if(document.getElementById("Check_VerificarSintaxisEditor").value=="1"){editor.session.setOption("useWorker",false);EditorClonado.session.setOption("useWorker",false);document.getElementById("Check_VerificarSintaxisEditor").value="0";$("#Check_VerificarSintaxisEditor").prop("checked",false)}else{editor.session.setOption("useWorker",true);EditorClonado.session.setOption("useWorker",true);document.getElementById("Check_VerificarSintaxisEditor").value="1";$("#Check_VerificarSintaxisEditor").prop("checked",true)}}function VerificarAutocompletado(){if(document.getElementById("Check_VerificarAutocompletado").value=="1"){editor.setOptions({enableBasicAutocompletion:false,enableLiveAutocompletion:false});EditorClonado.setOptions({enableBasicAutocompletion:false,enableLiveAutocompletion:false});document.getElementById("Check_VerificarAutocompletado").value="0";$("#Check_VerificarAutocompletado").prop("checked",false)}else{editor.setOptions({enableBasicAutocompletion:true,enableLiveAutocompletion:true});EditorClonado.setOptions({enableBasicAutocompletion:true,enableLiveAutocompletion:true});document.getElementById("Check_VerificarAutocompletado").value="1";$("#Check_VerificarAutocompletado").prop("checked",true)}}function IntercambiarVisibilidadNumerosDeLinea(){if(editor.renderer.getShowGutter()==true){editor.renderer.setShowGutter(false);EditorClonado.renderer.setShowGutter(false)}else{editor.renderer.setShowGutter(true);EditorClonado.renderer.setShowGutter(true)}}function ActivarBuscadorArchivos(){if(BuscadorArchivosVisible==1){$("#contenedor_buscador_archivos").css("display","none");$("#marco_explorador").show();$("#marco_operaciones_archivos").show();BuscadorArchivosVisible=0}else{$("#contenedor_buscador_archivos").css("display","block");$("#marco_explorador").hide();$("#marco_operaciones_archivos").hide();BuscadorArchivosVisible=1}}function LanzarBusquedaArchivos(){if(UltimaCarpetaSeleccionada==""){UltimaCarpetaSeleccionada=document.getElementById("path_exploracion_archivos").value}if($("#SensibleMayuscula").is(":checked")){SensibleMayuscula=1}else{SensibleMayuscula=0}ResultadoBuscador=PCO_ObtenerContenidoAjax(0,"mod/buscador/index.php","DirectorioExploracion="+UltimaCarpetaSeleccionada+"&PatronBusqueda="+document.FormBuscadorArchivos.archivo_busqueda.value+"&SensibleMayuscula="+SensibleMayuscula);$("#resultados_buscador_archivo").html(ResultadoBuscador)}function ActualizarTituloEditor(a){document.title=a;$(document).attr("title",a)}function SaltarALinea(){var a=document.getElementById("linea_salto").value;if(a!=""&&a>0){editor.gotoLine(a,0,true);document.getElementById("linea_salto").value=""}}function QuitarAvisoAlmacenamiento(){setTimeout(PCO_OcultarMensajeCargandoSimple,500)}function Guardar(){var a="";if(document.form_archivo_editado.PCODER_archivo.value=="demos/demo.txt"){a=MULTILANG_PCODER_ErrGuardarDefecto}if(ListaArchivos[IndiceArchivoActual].PermisosRW!="1"){a=MULTILANG_PCODER_ErrGuardarNoPermiso}if(a==""){PCO_MostrarMensajeCargandoSimple();document.form_archivo_editado.submit()}else{PCOJS_MostrarMensaje(MULTILANG_PCODER_Guardando+": "+MULTILANG_PCODER_Error,a)}}function PCO_VentanaPopup(c,a,b){window.open(c,a,b)}function PCO_AgregarElementoDiv(c,a){var b=document.getElementById(c);var d=document.createElement("NuevoElemento");d.innerHTML=a;b.appendChild(d)}function EjecutarOperacionFS(){var c=document.getElementById("path_operacion_elemento").value;var b=document.getElementById("operacion_fs").value;var d=document.getElementById("nombre_elemento").value;var a=document.getElementById("permisos_elemento").value;var e=document.getElementById("propietario_elemento").value;if(b=="CrearArchivo"){ResultadoOperacion=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCODER_CrearArchivo&PCODER_ElementoFS="+c+"/"+d);if(ResultadoOperacion==1){PCOJS_MostrarMensaje(MULTILANG_PCODER_Finalizado,MULTILANG_PCODER_ElementoCreado);ExplorarPath();$("#myModalOPERARFS").modal("hide");PCODER_CargarArchivo(c+"/"+d)}if(ResultadoOperacion==-1){PCOJS_MostrarMensaje(MULTILANG_PCODER_Error,MULTILANG_PCODER_ElementoExiste)}if(ResultadoOperacion==-2){PCOJS_MostrarMensaje(MULTILANG_PCODER_Error,MULTILANG_PCODER_ElementoNoCreado)}}if(b=="CrearCarpeta"){ResultadoOperacion=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCODER_CrearCarpeta&PCODER_ElementoFS="+c+"/"+d);if(ResultadoOperacion==1){PCOJS_MostrarMensaje(MULTILANG_PCODER_Finalizado,MULTILANG_PCODER_ElementoCreado);ExplorarPath();$("#myModalOPERARFS").modal("hide")}if(ResultadoOperacion==-1){PCOJS_MostrarMensaje(MULTILANG_PCODER_Error,MULTILANG_PCODER_ElementoExiste)}if(ResultadoOperacion==-2){PCOJS_MostrarMensaje(MULTILANG_PCODER_Error,MULTILANG_PCODER_ElementoNoCreado)}}if(b=="EditarPermisos"){ResultadoOperacion=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCODER_EditarPermisos&PCODER_ElementoFS="+c+"&PCODER_PropietarioFS="+e+"&PCODER_PermisosFS="+a);if(ResultadoOperacion==1){PCOJS_MostrarMensaje(MULTILANG_PCODER_Finalizado,MULTILANG_PCODER_ElementoCreado);$("#myModalOPERARFS").modal("hide")}else{PCOJS_MostrarMensaje(MULTILANG_PCODER_Error,MULTILANG_PCODER_ElementoNoCreado)}}if(b=="EliminarElemento"){PCODER_TipoElementoFS="archivo";if(UltimaCarpetaSeleccionada!=""){PCODER_TipoElementoFS="carpeta"}ResultadoOperacion=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCODER_EliminarElemento&PCODER_ElementoFS="+c+"&PCODER_TipoElementoFS="+PCODER_TipoElementoFS);if(ResultadoOperacion==1){PCOJS_MostrarMensaje(MULTILANG_PCODER_Finalizado,MULTILANG_PCODER_Eliminado);ExplorarPath();$("#myModalOPERARFS").modal("hide")}else{PCOJS_MostrarMensaje(MULTILANG_PCODER_Error,MULTILANG_PCODER_ElementoNoCreado)}}}function OperacionFS_CrearArchivo(){$("#myModalOPERARFS").css("z-index","500");$("#myModalOPERARFS").modal("show");document.getElementById("nombre_elemento").value="";document.getElementById("operacion_fs").value="CrearArchivo";document.getElementById("permisos_elemento").value=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPermisosArchivo&PCODER_archivo="+document.getElementById("nombre_elemento").value);document.getElementById("propietario_elemento").value=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPropietarioArchivo&PCODER_archivo="+document.getElementById("nombre_elemento").value);$("#operacion_fs").attr("disabled",true);$("#cuadro_entrada_path_operacion_elemento").show();$("#cuadro_entrada_marco_explorador").show();$("#cuadro_entrada_operacion_fs").show();$("#cuadro_entrada_nombre_elemento").show();$("#cuadro_entrada_permisos_elemento").hide()}function OperacionFS_CrearCarpeta(){$("#myModalOPERARFS").css("z-index","500");$("#myModalOPERARFS").modal("show");document.getElementById("nombre_elemento").value="";document.getElementById("operacion_fs").value="CrearCarpeta";document.getElementById("permisos_elemento").value=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPermisosArchivo&PCODER_archivo="+document.getElementById("nombre_elemento").value);document.getElementById("propietario_elemento").value=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPropietarioArchivo&PCODER_archivo="+document.getElementById("nombre_elemento").value);$("#operacion_fs").attr("disabled",true);$("#cuadro_entrada_path_operacion_elemento").show();$("#cuadro_entrada_marco_explorador").show();$("#cuadro_entrada_operacion_fs").show();$("#cuadro_entrada_nombre_elemento").show();$("#cuadro_entrada_permisos_elemento").hide()}function OperacionFS_EditarPermisos(){$("#myModalOPERARFS").css("z-index","500");$("#myModalOPERARFS").modal("show");document.getElementById("nombre_elemento").value=UltimaCarpetaSeleccionada+UltimoArchivoSeleccionado;document.getElementById("operacion_fs").value="EditarPermisos";document.getElementById("permisos_elemento").value=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPermisosArchivo&PCODER_archivo="+document.getElementById("nombre_elemento").value);document.getElementById("propietario_elemento").value=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPropietarioArchivo&PCODER_archivo="+document.getElementById("nombre_elemento").value);$("#operacion_fs").attr("disabled",true);$("#cuadro_entrada_path_operacion_elemento").show();$("#cuadro_entrada_marco_explorador").hide();$("#cuadro_entrada_operacion_fs").show();$("#cuadro_entrada_nombre_elemento").hide();$("#cuadro_entrada_permisos_elemento").show()}function OperacionFS_EliminarElemento(){$("#myModalOPERARFS").css("z-index","500");$("#myModalOPERARFS").modal("show");document.getElementById("nombre_elemento").value=UltimaCarpetaSeleccionada+UltimoArchivoSeleccionado;document.getElementById("operacion_fs").value="EliminarElemento";document.getElementById("permisos_elemento").value=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPermisosArchivo&PCODER_archivo="+document.getElementById("nombre_elemento").value);document.getElementById("propietario_elemento").value=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPropietarioArchivo&PCODER_archivo="+document.getElementById("nombre_elemento").value);$("#operacion_fs").attr("disabled",true);$("#cuadro_entrada_path_operacion_elemento").show();$("#cuadro_entrada_marco_explorador").hide();$("#cuadro_entrada_operacion_fs").show();$("#cuadro_entrada_nombre_elemento").hide();$("#cuadro_entrada_permisos_elemento").hide()}function PCODER_DesactivarPanelIzquierdo(){AnchoPanelIzquierdo=0;$("#panel_izquierdo").removeClass("col-md-2");$("#panel_izquierdo").hide();PCODER_RecalcularMaquetacion()}function PCODER_DesactivarPanelDerecho(){AnchoPanelDerecho=0;$("#panel_derecho").removeClass("col-md-2");$("#panel_derecho").hide();PCODER_RecalcularMaquetacion()}function PCODER_RecalcularPanelesLaterales(){AnchoPanelCentral=12-AnchoPanelIzquierdo-AnchoPanelDerecho;$("#panel_izquierdo").removeClass("col-md-2");$("#panel_derecho").removeClass("col-md-2");if(AnchoPanelIzquierdo==0){$("#panel_izquierdo").hide()}else{$("#panel_izquierdo").addClass("col-md-"+AnchoPanelIzquierdo)}if(AnchoPanelDerecho==0){$("#panel_derecho").hide()}else{$("#panel_derecho").addClass("col-md-"+AnchoPanelDerecho)}$("#panel_central").removeClass("col-md-8");$("#panel_central").removeClass("col-md-10");$("#panel_central").removeClass("col-md-12");$("#panel_central").addClass("col-md-"+AnchoPanelCentral);var c=$("#boton_ocultacion_panel_izquierdo").height();var b=$("#path_exploracion_archivos").height();var a=$("#marco_operaciones_archivos").height();var d=$("#panel_central_medio").height()-c-b-a;$("#marco_explorador").height(d+"px").css({})}function PCODER_ActivarPanelIzquierdo(){AnchoPanelIzquierdo=2;$("#panel_izquierdo").show();$("#panel_izquierdo").removeClass("col-md-0");$("#panel_izquierdo").addClass("col-md-"+AnchoPanelIzquierdo);PCODER_RecalcularMaquetacion()}function PCODER_ActivarPanelDerecho(){AnchoPanelDerecho=2;$("#panel_derecho").show();$("#panel_derecho").removeClass("col-md-0");$("#panel_derecho").addClass("col-md-"+AnchoPanelDerecho);PCODER_RecalcularMaquetacion()}function PCODER_RecalcularPanelesEditores(){var c=$("#contenedor_archivos").height();var d=$("#contenedor_mensajes_superior").height();var a=$("#panel_central_medio").height()-c-d;var e=$("#panel_central_medio").width();if(ListaArchivos[IndiceArchivoActual].VistaSplit=="H"){a=Math.round(a/2)-1;$("#panel_editor_clonado").show()}if(ListaArchivos[IndiceArchivoActual].VistaSplit=="V"){e=Math.round(e/2)-2;$("#panel_editor_clonado").show()}AltoEditorReal=a;AnchoEditorReal=e;AltoEditorClonado=a;AnchoEditorClonado=e;if(ListaArchivos[IndiceArchivoActual].VistaSplit==""){AltoEditorClonado=0;AnchoEditorClonado=0;$("#panel_editor_clonado").hide()}$("#editor_codigo").height(AltoEditorReal+"px").css({});$("#editor_codigo").width(AnchoEditorReal+"px").css({});$("#editor_clonado").height(AltoEditorClonado+"px").css({});$("#editor_clonado").width(AnchoEditorClonado+"px").css({});editor.resize();try{EditorClonado.resize()}catch(b){}}function PCODER_DividirPantalla_NO(){if(ListaArchivos[IndiceArchivoActual].VistaSplit!=""){ListaArchivos[IndiceArchivoActual].VistaSplit="";PCODER_RecalcularMaquetacion()}}function PCODER_DividirPantalla_Horizontal(){if(ListaArchivos[IndiceArchivoActual].VistaSplit!="H"){ListaArchivos[IndiceArchivoActual].VistaSplit="H";ClonarPropiedadesEditor();PCODER_RecalcularMaquetacion()}}function PCODER_DividirPantalla_Vertical(){if(ListaArchivos[IndiceArchivoActual].VistaSplit!="V"){ListaArchivos[IndiceArchivoActual].VistaSplit="V";ClonarPropiedadesEditor();PCODER_RecalcularMaquetacion()}}function PCODER_RecalcularPanelesExtensiones(){var b=$(window).height();var c=b-$("#panel_superior").height()-$("#panel_inferior").height()-$("#panel_central_superior").height();$("#frame_terminal").css("height",c+"px");$("#frame_terminal").css("width","100%");$("#frame_explorador").css("height",c+"px");$("#frame_explorador").css("width","100%");var a=c-$("#panel_controles_diff").height();$("#frame_diferencias").css("height",a+"px");$("#frame_diferencias").css("width","100%")}function PCODER_RecalcularMaquetacion(){PCODER_RecalcularPanelesLaterales();var a=$(window).height();var k=$(window).width();var e=$(document).height();var d=$(document).width();var j=$("#panel_superior").height();var c=$("#panel_central_superior").height();var b=$("#panel_central_inferior").height();var h=$("#panel_inferior").height();var g=(j+c+b+h)*100/a;var f=100-g;$("#panel_central_medio").height(f+"vh").css({});PCODER_RecalcularPanelesEditores();PCODER_RecalcularPanelesExtensiones()}function IntercambiarPantallaCompleta(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){if(document.documentElement.requestFullscreen){document.documentElement.requestFullscreen()}else{if(document.documentElement.msRequestFullscreen){document.documentElement.msRequestFullscreen()}else{if(document.documentElement.mozRequestFullScreen){document.documentElement.mozRequestFullScreen()}else{if(document.documentElement.webkitRequestFullscreen){document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}}}}else{if(document.exitFullscreen){document.exitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}}}}function AumentarTamanoFuente(){tamano=editor.getFontSize();tamano=tamano.substring(0,tamano.length-2);tamano=parseInt(tamano)+2;CambiarFuenteEditor(tamano+"px")}function DisminuirTamanoFuente(){tamano=editor.getFontSize();tamano=tamano.substring(0,tamano.length-2);tamano=parseInt(tamano)-2;CambiarFuenteEditor(tamano+"px")}function ExplorarPath(a){if(a==1){UltimaCarpetaSeleccionada=document.getElementById("path_exploracion_archivos").value;UltimoArchivoSeleccionado=""}$(document).ready(function(){$("#marco_explorador").fileTree({root:path_exploracion_archivos.value,script:"../../inc/jquery/plugins/jquery.fileTree-1.01/connectors/jqueryFileTree.php",folderEvent:"dblclick"},function(b){PCODER_CargarArchivo(b);$("#pestana_editor_archivos").trigger("click")})});$(document).ready(function(){$("#marco_explorador_creacionarchivo").fileTree({root:path_exploracion_archivos.value,script:"../../inc/jquery/plugins/jquery.fileTree-1.01/connectors/jqueryFileTree.php?nofiles=true"},function(b){})})}function ActualizarPathActual(){document.getElementById("path_operacion_elemento").value=UltimaCarpetaSeleccionada+UltimoArchivoSeleccionado;window.setTimeout(ActualizarPathActual,500)}function ActualizarBarraEstado(){posicion_cursor=editor.getCursorPosition();ListaArchivos[IndiceArchivoActual].LineaActual=posicion_cursor.row;ListaArchivos[IndiceArchivoActual].ColumnaActual=posicion_cursor.column;var a=editor.session.getLength();var b=editor.session.getValue().length;$("#NroLineasDocumento").html(MULTILANG_PCODER_Linea+": "+(ListaArchivos[IndiceArchivoActual].LineaActual+1)+" / "+a);$("#NroColumnaDocumento").html(MULTILANG_PCODER_Columna+": "+(ListaArchivos[IndiceArchivoActual].ColumnaActual+1));$("#NroCaracteresDocumento").html(MULTILANG_PCODER_Caracteres+": "+b);$("#TipoDocumento").html(MULTILANG_PCODER_Tipo+": "+ListaArchivos[IndiceArchivoActual].TipoDocumento);$("#TamanoDocumento").html(MULTILANG_PCODER_Tamano+": <b>"+ListaArchivos[IndiceArchivoActual].TamanoDocumento+" Kb</b>");$("#FechaModificadoDocumento").html(MULTILANG_PCODER_Modificado+": <b>"+ListaArchivos[IndiceArchivoActual].FechaModificadoDocumento+"</b>");window.setTimeout(ActualizarBarraEstado,1000)}function AgregarNuevoTextarea(a,c,b){elemento_textarea=document.createElement("textarea");elemento_textarea.cols=1;elemento_textarea.rows=1;elemento_textarea.name=c;elemento_textarea.id=c;elemento_textarea.value=b;a.appendChild(elemento_textarea)}function PCODER_Log(a){console.log(a)}function PCODER_CambiarArchivoActual(a,b){if(b==0){document.getElementById("PCODER_AreaTexto"+IndiceArchivoActual).value=editor.getSession().getValue()}document.form_archivo_editado.PCODER_archivo.value=ListaArchivos[a].RutaDocumento;document.form_archivo_editado.PCODER_TokenEdicion.value=ListaArchivos[a].TokenEdicion;document.form_archivo_editado.PCODER_AreaTexto.value=document.getElementById("PCODER_AreaTexto"+a).value;editor.setValue(document.getElementById("PCODER_AreaTexto"+a).value);editor.focus();editor.gotoLine(ListaArchivos[a].LineaActual+1,ListaArchivos[a].ColumnaActual,false);editor.scrollToLine(ListaArchivos[a].LineaActual+1,true,false,function(){});editor.clearSelection();ActualizarTituloEditor("{P} "+ListaArchivos[a].NombreArchivo);if(ListaArchivos[IndiceArchivoActual].ModoEditor!=ListaArchivos[a].ModoEditor){CambiarModoEditor("ace/mode/"+ListaArchivos[a].ModoEditor)}IndiceArchivoActual=a;ValorPermisosRW=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_VerificarPermisosRW&PCODER_archivo="+ListaArchivos[a].RutaDocumento);if(ValorPermisosRW==0&&ListaArchivos[a].RutaDocumento!="demos/demo.txt"){contenedor_mensajes_superior.innerHTML='<div class="alert alert-warning btn-xs" role="alert" style="margin: 0px; padding: 5px;" ><i class="fa fa-warning"></i> <b>'+MULTILANG_PCODER_ErrorRW+"</b>. "+MULTILANG_PCODER_Estado+"="+ListaArchivos[a].PermisosArchivo+"</div>"}else{contenedor_mensajes_superior.innerHTML=""}editor.getSession().setUndoManager(ListaArchivos[a].AdministradorDeshacer);PCODER_ActualizarMinimap();ActualizarPestanasArchivos()}function PCODER_CerrarArchivo(a){ListaArchivos[a].TipoDocumento="";ListaArchivos[a].TamanoDocumento="";ListaArchivos[a].FechaModificadoDocumento="";ListaArchivos[a].RutaDocumento="";ListaArchivos[a].TokenEdicion="";ListaArchivos[a].ModoEditor="";ListaArchivos[a].NombreArchivo="";ListaArchivos[a].LineaActual="";ListaArchivos[a].PermisosRW="";ListaArchivos[a].PermisosArchivo="";ListaArchivos[a].VistaSplit="";ListaArchivos[a].AdministradorDeshacer="";if(a==1){IndiceArchivoActual=0}else{if(a==IndiceArchivoActual){IndiceArchivoActual=1}}ActualizarPestanasArchivos();PCODER_CambiarArchivoActual(IndiceArchivoActual,1)}function PCODER_CerrarArchivoActual(){PCODER_CerrarArchivo(IndiceArchivoActual)}function PCODER_BuscarArchivoAbierto(a){Encontrado=-1;for(i=0;i<IndiceAperturaArchivo;i++){if(ListaArchivos[i].RutaDocumento==a){Encontrado=i}}return Encontrado}function PCODER_ActualizarListaArchivosDiff(){PCOJS_LimpiarComboBox("archivo_diff_1");PCOJS_LimpiarComboBox("archivo_diff_2");ListaArchivosAbiertosDiff="";for(i=1;i<IndiceAperturaArchivo;i++){if(ListaArchivos[i].NombreArchivo!=""){ListaArchivosAbiertosDiff=ListaArchivosAbiertosDiff+"|"+ListaArchivos[i].RutaDocumento}}PCOJS_OpcionesCombo_DesdeCSV("archivo_diff_1",ListaArchivosAbiertosDiff,"|");PCOJS_OpcionesCombo_DesdeCSV("archivo_diff_2",ListaArchivosAbiertosDiff,"|");PCOJS_ActualizarComboBox("archivo_diff_1");PCOJS_ActualizarComboBox("archivo_diff_2")}function PCODER_EjecutarDiff(){Archivo1=document.getElementById("archivo_diff_1").value;Archivo2=document.getElementById("archivo_diff_2").value;EstiloCSSDiff=document.getElementById("formato_diff").value;ModoVisualDiff=document.getElementById("modo_visual_diff").value;URL_Diff="mod/php-diff-1.0/generador/index.php?ArchivoViejo="+Archivo1+"&ArchivoNuevo="+Archivo2+"&EstiloCSS="+EstiloCSSDiff+"&ModoVisual="+ModoVisualDiff;if(Archivo1!=""&&Archivo2!=""&&Archivo1!=Archivo2){PCODER_CargarIframeURL("frame_diferencias",URL_Diff)}}function PCODER_CargarIframeURL(c,a){var b=$("#"+c);if(b.length){b.attr("src",a);return false}return true}function PCODER_DeshacerEdicion(){editor.getSession().getUndoManager().undo(false)}function PCODER_RehacerEdicion(){editor.getSession().getUndoManager().redo(false)}function ActualizarPestanasArchivos(){var a=0;lista_contenedor_archivos.innerHTML="";for(i=1;i<IndiceAperturaArchivo;i++){ComplementoClase="";if(IndiceArchivoActual==i){ComplementoClase='class="active"'}if(ListaArchivos[i].NombreArchivo!=""){ComplementoTooltip="<i class='fa fa-hdd-o'></i> "+ListaArchivos[i].RutaDocumento+"<br>";ComplementoTooltip+="<i class='fa fa-key'></i> Permisos (CHMOD): "+ListaArchivos[i].PermisosArchivo+"<br>";lista_contenedor_archivos.innerHTML=lista_contenedor_archivos.innerHTML+"<li "+ComplementoClase+' ><a data-toggle="tooltip" data-html="true" data-placement="bottom" title="'+ComplementoTooltip+'" style="cursor:pointer;" OnClick="PCODER_CambiarArchivoActual('+i+',0);"><i class="fa fa-file-text-o fa-inactive"></i> '+ListaArchivos[i].NombreArchivo+"</a></li>";lista_contenedor_archivos.innerHTML=lista_contenedor_archivos.innerHTML+'<li ><a data-toggle="tab" style="cursor:pointer; margin-right: 10px;" OnClick="PCODER_CerrarArchivo('+i+');"><i class="fa fa-times"></i></a></li>';a=1}RecargarToolTipsEnlaces()}PCODER_ActualizarListaArchivosDiff();if(a==1){$("#contenedor_archivos").height("auto").css({})}else{$("#contenedor_archivos").height("0px").css({})}PCODER_RecalcularMaquetacion()}function PCODER_CargarArchivo(a){if(typeof a=="undefined"){a="demos/demo.txt"}BusquedaArchivoAbierto=-1;if(IndiceAperturaArchivo>0){BusquedaArchivoAbierto=PCODER_BuscarArchivoAbierto(a)}if(IndiceAperturaArchivo!=0){document.getElementById("PCODER_AreaTexto"+IndiceArchivoActual).value=editor.getSession().getValue()}if(BusquedaArchivoAbierto==-1){ValorModoEditor=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerModoEditor&PCODER_archivo="+a);if(ValorModoEditor!=""){ValorTipoElemento=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerTipoElemento&PCODER_archivo="+a);ValorTamanoDocumento=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerTamanoDocumento&PCODER_archivo="+a);ValorFechaModificadoDocumento=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerFechaElemento&PCODER_archivo="+a);ValorTokenEdicion=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerTokenEdicion&PCODER_archivo="+a);ValorNombreArchivo=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerNombreArchivo&PCODER_archivo="+a);ValorContenidoArchivo=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerContenidoArchivo&PCODER_archivo="+a);ValorPermisosRW=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_VerificarPermisosRW&PCODER_archivo="+a);ValorPermisosArchivo=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPermisosArchivo&PCODER_archivo="+a);ValorVistaSplit="";ValorAdministradorDeshacer=new ace.UndoManager();ValorInicioLineaRenderizadaMiniMap=0;ListaArchivos[IndiceAperturaArchivo]={TipoDocumento:ValorTipoElemento,TamanoDocumento:ValorTamanoDocumento,FechaModificadoDocumento:ValorFechaModificadoDocumento,RutaDocumento:a,TokenEdicion:ValorTokenEdicion,ModoEditor:ValorModoEditor,NombreArchivo:ValorNombreArchivo,LineaActual:1,ColumnaActual:0,PermisosRW:ValorPermisosRW,PermisosArchivo:ValorPermisosArchivo,VistaSplit:ValorVistaSplit,AdministradorDeshacer:ValorAdministradorDeshacer,InicioLineaRenderizadaMiniMap:ValorInicioLineaRenderizadaMiniMap};AgregarNuevoTextarea(document.form_textareas_archivos,"PCODER_AreaTexto"+IndiceAperturaArchivo,ValorContenidoArchivo);IndiceUltimoArchivoAbierto=IndiceAperturaArchivo;IndiceArchivoActual=IndiceAperturaArchivo;IndiceAperturaArchivo++;PCODER_CambiarArchivoActual(IndiceArchivoActual,1);CambiarModoEditor("ace/mode/"+ListaArchivos[IndiceArchivoActual].ModoEditor)}else{PCOJS_MostrarMensaje(MULTILANG_PCODER_Error,MULTILANG_PCODER_ExtensionNoSoportada)}}else{PCODER_CambiarArchivoActual(BusquedaArchivoAbierto,0)}}function PCODER_ActualizarMinimap(){if($("#Check_ActivarMinimap").is(":checked")){var b=320;var a=400;var f=Math.round(a/3);var e=editor.getCursorPosition();var g=e.row;var c=editor.session.getLength();var d=document.getElementById("TextoCanvasMinimap").getContext("2d");d.clearRect(0,0,b,a);d.beginPath();InicioLineaRenderizada=Math.round(g-(f/2));if(InicioLineaRenderizada<0){InicioLineaRenderizada=0}else{f=f+(InicioLineaRenderizada)}ListaArchivos[IndiceArchivoActual].InicioLineaRenderizadaMiniMap=InicioLineaRenderizada;for(LineaMinimap=0;LineaMinimap<f&&LineaMinimap<c;LineaMinimap++){LineaCodigoMinimap=editor.session.getLine(LineaMinimap+InicioLineaRenderizada);LongitudLinea=LineaCodigoMinimap.length;d.moveTo(5,(LineaMinimap)*3);d.lineTo(7,(LineaMinimap)*3);if(LongitudLinea>0){d.moveTo(10,(LineaMinimap)*3);d.lineTo(LongitudLinea+10,(LineaMinimap)*3)}d.stroke()}}}function PCODER_ObtenerLineaMinimap(b,c){var a=editor.session.getLength();var f=$(b).offset().left,d=$(b).offset().top;CoordenadaX=c.pageX-f;CoordenadaY=c.pageY-d;LineaMinimap=Math.round(CoordenadaY/3)+1;if(LineaMinimap>a){LineaMinimap=a}return LineaMinimap}$("#TextoCanvasMinimap").click(function(a){editor.gotoLine(PCODER_ObtenerLineaMinimap(this,a)+ListaArchivos[IndiceArchivoActual].InicioLineaRenderizadaMiniMap,0,true);PCODER_ActualizarMinimap()});$("#TextoCanvasMinimap").mousemove(function(b){var a=PCODER_ObtenerLineaMinimap(this,b)+ListaArchivos[IndiceArchivoActual].InicioLineaRenderizadaMiniMap;$("#LineaSaltoMinimap").html(a)});var ListaArchivos=new Array();var IndiceAperturaArchivo=0;var IndiceUltimoArchivoAbierto=IndiceAperturaArchivo;var IndiceArchivoActual=IndiceAperturaArchivo;var ValorModoEditor;var UltimaCarpetaSeleccionada=document.getElementById("path_exploracion_archivos").value;var UltimoArchivoSeleccionado="";AnchoPanelIzquierdo=0;AnchoPanelDerecho=0;BuscadorArchivosVisible=0;$("#iframe_marco_explorador").load(function(){$("#progreso_marco_explorador").hide()});ace.require("ace/ext/language_tools");editor=ace.edit("editor_codigo");editor.getSession().setUseWorker(true);editor.resize(true);editor.getSession().setNewLineMode("unix");editor.getSession().setUndoManager(new ace.UndoManager());PCODER_CargarArchivo();CambiarFuenteEditor("13px");CambiarTemaEditor("ace/theme/ambiance");editor.setOptions({enableBasicAutocompletion:true,enableSnippets:true,enableLiveAutocompletion:true});editor.setAnimatedScroll(true);editor.setShowPrintMargin(0);CaracteresInvisiblesEditor(0);editor.getSession().on("change",function(){document.getElementById("PCODER_AreaTexto").value=editor.getSession().getValue();PCODER_ActualizarMinimap()});$(window).resize(function(){PCODER_RecalcularMaquetacion()});$(window).bind("keydown",function(a){if(a.ctrlKey||a.metaKey){switch(String.fromCharCode(a.which).toLowerCase()){case"s":a.preventDefault();Guardar();break;case"o":a.preventDefault();PCODER_ActivarPanelIzquierdo();break;case"q":a.preventDefault();PCODER_CerrarArchivoActual();break;case"z":a.preventDefault();break;case"y":a.preventDefault();break}}});editor.on("click",function(a){PCODER_ActualizarMinimap()});editor.commands.addCommand({name:"vermarcoderecho",bindKey:{win:"Ctrl-M",mac:"Command-Option-M"},exec:function(a){PCODER_ActivarPanelDerecho()},readOnly:true});editor.commands.addCommand({name:"deshacer",bindKey:{win:"Ctrl-Z",mac:"Command-Option-Z"},exec:function(a){PCODER_DeshacerEdicion()},readOnly:true});editor.commands.addCommand({name:"rehacer",bindKey:{win:"Ctrl-Y",mac:"Command-Option-Y"},exec:function(a){PCODER_RehacerEdicion()},readOnly:true});editor.commands.addCommand({name:"aumentarfuenteeditor",bindKey:{win:"Ctrl-+",mac:"Command-Option-+"},exec:function(a){AumentarTamanoFuente()},readOnly:true});editor.commands.addCommand({name:"disminuirfuenteeditor",bindKey:{win:"Ctrl--",mac:"Command-Option--"},exec:function(a){DisminuirTamanoFuente()},readOnly:true});function ClonarSesionEditor(b){var a=new ace.EditSession(b.getDocument(),b.getMode());a.$foldData=b.$cloneFoldData();return a}function ClonarPropiedadesEditor(){EditorClonado.setAnimatedScroll(editor.getAnimatedScroll());EditorClonado.setBehavioursEnabled(editor.getBehavioursEnabled());EditorClonado.setOverwrite(editor.getOverwrite());EditorClonado.setPrintMarginColumn(editor.getPrintMarginColumn());EditorClonado.setScrollSpeed(editor.getScrollSpeed());EditorClonado.setShowInvisibles(editor.getShowInvisibles());EditorClonado.setShowPrintMargin(editor.getShowPrintMargin());EditorClonado.setWrapBehavioursEnabled(editor.getWrapBehavioursEnabled());EditorClonado.setTheme(editor.getTheme());EditorClonado.setFontSize(editor.getFontSize());EditorClonado.renderer.setShowGutter(editor.renderer.getShowGutter());ModoClonado="ace/mode/"+ListaArchivos[IndiceArchivoActual].ModoEditor;var a=ModoClonado.replace(/_/g," ");a=a.toLowerCase();EditorClonado.getSession().setMode(a)}var NuevaSessionEditor=editor.getSession();var editor_actual=document.getElementById("editor_codigo");var parent=editor_actual.parentNode;var clone=editor_actual.cloneNode();var EditorClonado=ace.edit("editor_clonado");EditorClonado.setSession(ClonarSesionEditor(NuevaSessionEditor));ExplorarPath();ActualizarPathActual();PCODER_RecalcularMaquetacion();window.setTimeout(ActualizarBarraEstado,1000);